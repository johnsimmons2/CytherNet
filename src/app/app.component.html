<!-- <app-loading-spinner [showSpinner]="showSpinner"></app-loading-spinner> -->

<ion-menu side="start" menuId="first" contentId="main-content" [(ngModel)]="opened">
  <ion-header>
    <ion-toolbar>
      <ion-title>Menu</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list>
      <!-- Basic universal routes -->
      <ion-item button (click)="routeTo('profile')" routerLinkActive="active">
        Welcome <h3 style="display: inline;">{{username}}</h3>
      </ion-item>
      <ion-item button (click)="routeTo('characters')" routerLinkActive="active">My Characters</ion-item>
      <ion-item button (click)="routeTo('campaign')" routerLinkActive="active">My Campaigns</ion-item>

      <ion-item-divider></ion-item-divider>

      <!-- Campaign specific -->
      <div *ngIf="selectedCampaign !== ''">
        <ion-item button (click)="routeTo('characters')" routerLinkActive="active">Characters</ion-item>
        <ion-item button (click)="routeTo('campaign')" routerLinkActive="active">
          <h3>{{selectedCampaign}}</h3>
        </ion-item>
        <ion-item button (click)="routeTo('journal')" routerLinkActive="active">Journal</ion-item>
      </div>

      <!-- Dungeon Master Panel -->
      <div *ngIf="isAdmin">
        <ion-item button (click)="routeTo('dmaster')">
          <h3>Dungeon Master</h3>
        </ion-item>

        <!-- Manage Accordion -->
        <ion-accordion-group>
          <ion-accordion>
            <ion-item slot="header">
              <ion-label>Manage</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-list>
                <ion-item button (click)="routeTo('dmaster/users')">Users</ion-item>
                <ion-item button (click)="routeTo('dmaster/races')">Races</ion-item>
                <ion-item button (click)="routeTo('dmaster/feats')">Feats</ion-item>
                <ion-item button (click)="routeTo('dmaster/classes')">Classes</ion-item>
              </ion-list>
            </div>
          </ion-accordion>

          <!-- Create Accordion -->
          <ion-accordion>
            <ion-item slot="header">
              <ion-label>Create</ion-label>
            </ion-item>
            <div class="ion-padding" slot="content">
              <ion-list>
                <ion-item button (click)="routeTo('dmaster/characters/create')">Character</ion-item>
                <ion-item button (click)="routeTo('dmaster/races/create')">Race</ion-item>
                <ion-item button (click)="routeTo('dmaster/feats/create')">Feat</ion-item>
                <ion-item button (click)="routeTo('dmaster')">Class / Subclass</ion-item>
                <ion-item button (click)="routeTo('dmaster')">Item</ion-item>
                <ion-item button (click)="routeTo('dmaster')">Monster</ion-item>
              </ion-list>
            </div>
          </ion-accordion>
        </ion-accordion-group>

        <ion-item button (click)="routeTo('about')" routerLinkActive="active">
          <sub>About Cyther Online</sub>
        </ion-item>
      </div>
    </ion-list>
  </ion-content>
</ion-menu>

<ion-content id="main-content">
  <router-outlet></router-outlet>
</ion-content>

<footer>
  <div style="padding: 18px; color: gray;">
    <a (click)="routeTo('about')" style="cursor: pointer;">
      <sub>Cyther.online version {{cytherVersion}}</sub>
    </a>
  </div>
</footer>
