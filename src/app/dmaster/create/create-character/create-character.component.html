<div class="cyther-page">
  <div>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="characterForm" (ngSubmit)="submit()" fxLayout="row wrap" fxLayoutAlign="space-between none">

          <mat-form-field fxFlex="60">
            <input matInput placeholder="Character Name" type="text" formControlName="characterNameForm" />
            <mat-error>
              <span *ngIf="characterForm.controls['characterNameForm'].hasError('required')">Character name is required.</span>
              <span *ngIf="characterForm.controls['characterNameForm'].hasError('maxlength')">Character name cannot be longer than 20 characters. ({{characterForm.controls['characterNameForm'].value!.toString().length}})</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="30">
            <input matInput
                    type="number"
                    value="1"
                    formControlName="levelForm"/>
            <span matPrefix>&nbsp;&nbsp;Level</span>
            <mat-error>
              <span *ngIf="characterForm.controls['levelForm'].hasError('max')">Level cap is 20!</span>
              <span *ngIf="characterForm.controls['levelForm'].hasError('min')">Minimum level is 1.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Race</mat-label>
            <mat-select formControlName="raceForm">
              <mat-option *ngFor="let clazz of clazzes" [value]="clazz">
                {{clazz.name}}
              </mat-option>
            </mat-select>
            <mat-hint>
              <!-- Eventually, grab the race traits and append to this list via method -->
              <app-subtle-modal title="Race Traits" [text]="getRaceTraitDescription()">
              </app-subtle-modal>
            </mat-hint>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Class</mat-label>
            <mat-select>
              <mat-option *ngFor="let clazz of clazzes" [value]="clazz">
                {{clazz.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field>
            <mat-label>Sub-Class</mat-label>
            <mat-select>
              <mat-option *ngFor="let clazz of getSubclasses()" [value]="clazz">
                {{clazz.name}}
              </mat-option>
            </mat-select>
          </mat-form-field>

            <!-- <mat-grid-tile #characterType [colspan]="3">
              <mat-chip-list [selectable]="true" id="character-opts" (change)="characterTypeFormUpdate($event)" formControlName="characterTypeForm">
                <mat-chip id="pc-option"
                          #pcOption="matChip"
                          [selected]="selectedCharType === 0"
                          (click)="characterTypeSelect(pcOption)">PC</mat-chip>
                <mat-chip id="npc-option"
                          #npcOption="matChip"
                          [selected]="selectedCharType === 1"
                          (click)="characterTypeSelect(npcOption)">NPC</mat-chip>
                <mat-chip id="m-option"
                          #mOption="matChip"
                          [selected]="selectedCharType === 2"
                          (click)="characterTypeSelect(mOption)">Monster</mat-chip>
              </mat-chip-list>
            </mat-grid-tile> -->


          <app-health [dice]="hitDice">
          </app-health>

          <!-- modal selectors that let the players pick their spells and cantrips, or type up their background / pick background. -->
          <a>Spells</a>
          <a>Cantrips</a>
          <a>Background</a>
          <a>Personality</a>

          <h3 style="width: 100%;">
            Spell Slots
          </h3>

          <ng-container *ngFor="let d of spellSlots">
            <spell-slot-app [amount]="d.amount" [tier]="d.tier" [displayOnly]="true" style="margin: 4px;">
            </spell-slot-app>
          </ng-container>

        </form>
      </mat-card-content>
    </mat-card>
    <div class="form-row">
      <div fxFlex="column" fxLayoutGap="20px">
          <div fxFlex class="form-row-item">
              <button mat-raised-button type="submit" color="primary" [disabled]="!characterForm.valid">Create</button>
          </div>
          <div fxFlex="0.5" fxHide.lt-md></div>
          <div fxFlex class="form-row-item">
              <button mat-raised-button type="button" color="warn" (click)="router.navigate(['/'])">Cancel</button>
          </div>
      </div>
  </div>
  </div>
</div>
