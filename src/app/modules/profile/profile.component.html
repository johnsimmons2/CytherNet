<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <h2>Profile</h2>
      </ion-card-title>
      <ion-card-subtitle>
        <h3>Profile Information</h3>
      </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="profileForm" (ngSubmit)="submit()">
        <ion-label>
          <h3>Profile Information <span *ngIf="username?.toLowerCase() === 'wocket'">...Hi Bob</span></h3>
        </ion-label>
        <ion-list>
          <ion-item>
            <ion-input [placeholder]="username" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <app-editable-field style="width: 100%" formControlName="email" [field]="'Email'" placeholder="email" (valueChange)="updatedField($event)">
            </app-editable-field>
          </ion-item>
          <ion-item>
            <app-editable-field style="width: 100%" formControlName="firstName" [field]="'First Name'" (valueChange)="updatedField($event)">
            </app-editable-field>
          </ion-item>
          <ion-item>
            <app-editable-field style="width: 100%" formControlName="lastName" [field]="'Last Name'" (valueChange)="updatedField($event)">
            </app-editable-field>
          </ion-item>
        </ion-list>
        <ion-button *ngIf="isEdited" color="primary" fill="clear" type="submit">Save Changes</ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <h2>Change Password</h2>
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
        <ion-label>
          <h3>Change Password</h3>
        </ion-label>
        <ion-list>
          <ion-item>
            <ion-input placeholder="Current Password" type="password" formControlName="password"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input placeholder="New Password" type="password" formControlName="passwordConfirm"></ion-input>
          </ion-item>
          <ion-item>
            <ion-input placeholder="Confirm Password" type="password" formControlName="passwordConfirm2"></ion-input>
          </ion-item>
          <ion-text color="danger" *ngIf="passwordForm.controls.passwordConfirm.errors?.['mismatch']">
            <p>Passwords do not match!</p>
          </ion-text>
        </ion-list>
        <ion-button color="primary" fill="clear" type="submit" [disabled]="this.passwordForm.invalid">Change Password</ion-button>
      </form>
    </ion-card-content>
  </ion-card>

  <ion-toast [isOpen]="toastOpen" (didDismiss)="toastOpen = false" [message]="toastMessage" [duration]="5000"></ion-toast>
</ion-content>
