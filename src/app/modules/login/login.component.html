<ion-content>
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <h2>Login to an existing account</h2>
      </ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="loginFormGroup" (ngSubmit)="submit()" id="loginForm">
        <ion-item>
          <ion-input id="username" placeholder="Username" type="text" formControlName="username" [clearInput]="true"></ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="loginFormGroup.controls.username.errors?.['required'] && loginFormGroup.controls.username.touched">
          <p>Username is required.</p>
        </ion-text>

        <ion-item>
          <ion-input id="password" placeholder="Password" [type]="hidePassword ? 'password' : 'text'" formControlName="password" [clearOnEdit]="true">
            <ion-button fill="clear" slot="end" aria-label="Show/hide" (click)="togglePasswordVisibility()">
              <ion-icon slot="icon-only" [icon]="eyeCon" aria-hidden="true"></ion-icon>
            </ion-button>
          </ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="loginFormGroup.controls.password.errors?.['required'] && loginFormGroup.controls.password.touched">
          <p>Password is required.</p>
        </ion-text>
      </form>
    </ion-card-content>

    <ion-button fill="clear" type="submit" form="loginForm" (click)="submit()" [disabled]="!loginFormGroup.valid">Login</ion-button>
    <ion-button fill="clear" color="secondary" type="button" (click)="registerUser()">Register</ion-button>
  </ion-card>
</ion-content>

<!-- Password Reset Form -->
<ng-template #passwordForm>
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <h3>Reset your password</h3>
      </ion-card-title>
      <ion-card-subtitle>
        If you have an account registered with an email address, you will receive an email with instructions on how to recover your account.
      </ion-card-subtitle>
    </ion-card-header>

    <form [formGroup]="passwordFormGroup" (ngSubmit)="resetPassword()">
      <ion-card-content>
        <ion-item>
          <ion-label position="floating">Email</ion-label>
          <ion-input id="email" placeholder="Email" type="email" formControlName="email"></ion-input>
          <ion-note slot="error" *ngIf="passwordFormGroup.controls.email.errors?.['required']">
            Email is required.
          </ion-note>
        </ion-item>
      </ion-card-content>

      <ion-button expand="block" color="primary" type="submit" [disabled]="!passwordFormGroup.valid">Submit</ion-button>
    </form>
  </ion-card>
</ng-template>
